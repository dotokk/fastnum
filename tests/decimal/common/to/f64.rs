macro_rules! test_impl {
    (D, $bits: literal) => {
        paste::paste! { test_impl!(SIGNED: $bits, [< dec $bits >], [<D $bits>]); }
    };
    (UD, $bits: literal) => {
        paste::paste! { test_impl!(UNSIGNED: $bits, [< udec $bits >], [<UD $bits>]); }
    };
    (UNSIGNED: $bits: tt, $dec: ident, $D: ident) => {
        mod $dec {
            use rstest::*;
            use fastnum::*;
            use num_traits::float::FloatCore;

            super::test_impl!(COMMON:: $bits, $dec, $D, THIS);
            super::test_impl!(UNSIGNED:: $bits, $dec, $D, THIS);
        }
    };
    (SIGNED: $bits: tt, $dec: ident, $D: ident) => {
        mod $dec {
            use rstest::*;
            use fastnum::*;
            use num_traits::float::FloatCore;

            super::test_impl!(COMMON:: $bits, $dec, $D, THIS);
            super::test_impl!(SIGNED:: $bits, $dec, $D, THIS);
        }
    };
    (COMMON:: 512, $dec: ident, $D: ident, THIS) => {
        super::test_impl!(COMMON:: 256, $dec, $D);

        #[rstest(::trace)]
        #[case(0.1,                                 $dec!(0.1000000000000000055511151231257827021181583404541015625))]
        #[case(0.01,                                $dec!(0.01000000000000000020816681711721685132943093776702880859375))]
        #[case(0.001,                               $dec!(0.001000000000000000020816681711721685132943093776702880859375))]
        #[case(12.34,                               $dec!(12.339999999999999857891452847979962825775146484375))]
        #[case(0.333333333333333333333333333333,    $dec!(0.333333333333333314829616256247390992939472198486328125))]
        #[case(1.0 / 3.0,                           $dec!(0.333333333333333314829616256247390992939472198486328125))]
        #[case(3.0000000000000004,                  $dec!(3.000000000000000444089209850062616169452667236328125))]
        #[case(0.07155292,                          $dec!(0.07155292000000000596227067717336467467248439788818359375))]
        #[case(21509.2,                             $dec!(21509.20000000000072759576141834259033203125))]
        #[case(2.3283064e-10,                       $dec!(2.328306399999999934987650668772826180463741962967105791904032230377197265625e-10))]
        #[case(0.14693861798803098,                 $dec!(0.146938617988030983951830421574413776397705078125))]
        #[case(6.99999952316,                       $dec!(6.9999995231599996259319595992565155029296875))]
        #[case(8.544283616667655e-306,              $dec!(8.544283616667654575874546988147584698617899107622067483877871973518261959184793073809745942342447094133599670355318006538990967521402677990248266071056319e-306))]
        #[case(3e300,                               $dec!(3.000000000000000157514280765613260746113405743324477464747562346535407373966724587359114125241343592131113331498651634530827569706081291726934376554360121e+300))]
        #[case(2.22507385850720138309e-308,         $dec!(2.225073858507201383090232717332404064219215980462331830553327416887204434813918195854283159012511020564067339731035811005152434161553460108856012385377719e-308))]
        #[case(2.2422566691339237e-308,             $dec!(2.242256669133923704413741578324212947670587290980391185032788024745030730997743098486699115597574328512833990799569336608309530165228577019102119954701485e-308))]
        #[case(2.3241588193064047369548958e-308,    $dec!(2.324158819306404736954895754480672358250753845178695618458175952307403949750237860609989742157321200871307617350926135832605463335146636599651042598003682e-308))]
        #[case(2.81341650018752e-308,               $dec!(2.813416500187519827875927552594349806750506300196796917550648074415263949683535546289788995013869942991669051572272997687660724765889105173604552006330122e-308))]
        #[case(1.2631319022638611e-306,             $dec!(1.2631319022638611145031529070758022871483812142792533378759590258170069528920763902477966463907232999683549123306174031329361777791806198721627707436110706e-306))]
        #[case(1.2671120387509151e-306,             $dec!(1.2671120387509150891199083562860236053872069415970357264939837482037218136531547199086938703493010193181740754785708212179710863288659361381538025371017377e-306))]
        #[case(1.2804061026577255385094242e-306,    $dec!(1.2804061026577255385094242463246367396679403922571399974203587875931690949627788652059102075942994772219836961021680995010658536349023591294211472071372525e-306))]
        #[case(1.2808359567839929e-306,             $dec!(1.2808359567839928645092757224566786919082509283609026772675128671671646994899891281136034211129963198952721531074209916725526103710825984151314699088414866e-306))]
        #[case(1.2858515622241412e-306,             $dec!(1.2858515622241412169625256880945589955714289483254260169547948440791488506806805172183198056060843133568248071007534574661031121640106823317005728970876999e-306))]
        #[case(1.299253504365148e-306,              $dec!(1.2992535043651480409998195196072986695196161472335325195319691026267253060163424543885220249805553020259012605787305761669299817341866062349494746506214526e-306))]
        #[case(3.3077876175268485200051509e-10,     $dec!(3.30778761752684852000515090556724377701680595009747776202857494354248046875e-10))]
        #[case(3.3137813483196602609126409e-10,     $dec!(3.3137813483196602609126408842490398021229935920928255654871463775634765625E-10))]
        #[case(3.31402461029028927442e-10,          $dec!(3.314024610290289274416863918304443359375E-10))]
        #[case(3.8545798589014332545116763e-10,     $dec!(3.85457985890143325451167632389177890306353191363086807541549205780029296875E-10))]
        #[case(3.8589640404354976528186133e-10,     $dec!(3.85896404043549765281861325450819821814008037108578719198703765869140625E-10))]
        #[case(3.86070259095205869926e-10,          $dec!(3.860702590952058699258486740291118621826171875E-10))]
        #[case(5.6342475626375463906655146e-10,     $dec!(5.634247562637546390665514600714670889747281989912153221666812896728515625E-10))]
        #[case(5.63556035171330904632e-10,          $dec!(5.63556035171330904631759040057659149169921875E-10))]
        #[case(5.6472809385237609665289329e-10,     $dec!(5.6472809385237609665289328672414803644841185814584605395793914794921875E-10))]
        #[case(5.65448687872560640244e-10,          $dec!(5.6544868787256064024404622614383697509765625E-10))]
        #[case(4.5419401324200408134839199e+42,     $dec!(4.541940132420040813483919915281692168814592e+42))]
        #[case(4.5691506753016354231242665e+42,     $dec!(4.569150675301635423124266480895704849973248e+42))]
        #[case(4.5852629045946275118908509e+42,     $dec!(4.585262904594627511890850850494634398842880e+42))]
        #[case(4.6282141802359669439365684e+42,     $dec!(4.628214180235966943936568431604864403898368e+42))]
        #[case(4.7242839265893572523021356e+42,     $dec!(4.724283926589357252302135592326889063055360e+42))]
        #[case(4.7757777454975695896809304e+42,     $dec!(4.775777745497569589680930382281188699013120e+42))]
        #[case(5.8000785913135992383902788e+44,     $dec!(5.80007859131359923839027879616849202680692736e+44))]
        #[case(5.8213737603962721732779450e+44,     $dec!(5.82137376039627217327794499509359422428151808e+44))]
        #[case(5.8255115792434116359518203e+44,     $dec!(5.82551157924341163595182034711193753233653760e+44))]
        #[case(5.8497446985666636477213860e+44,     $dec!(5.84974469856666364772138601846135994099695616e+44))]
        #[case(5.8880224454499436171530479e+44,     $dec!(5.88802244544994361715304790038597259409489920e+44))]
        #[case(5.9390128508959945194140647e+44,     $dec!(5.93901285089599451941406469331719789045874688e+44))]
        #[case(5.9441029824874393645952206e+44,     $dec!(5.94410298248743936459522055200602595474276352e+44))]
        #[case(5.9603855972916670819078105e+44,     $dec!(5.96038559729166708190781052366055712701284352e+44))]
        #[case(6.0411537776206233681185935e+44,     $dec!(6.04115377762062336811859353921780001814872064e+44))]
        #[case(6.0444476645473522470246937e+44,     $dec!(6.04444766454735224702469367152032624985243648e+44))]
        #[case(6.0723014722453062731189188e+44,     $dec!(6.07230147224530627311891883483318805115961344e+44))]
        #[case(6.0745149893217041224896335e+44,     $dec!(6.07451498932170412248963346062943791395897344e+44))]
        #[case(6.1226218997252336013385513e+44,     $dec!(6.12262189972523360133855129654153525856305152e+44))]
        #[case(6.1472280189627291293532713e+44,     $dec!(6.14722801896272912935327126482695494685425664e+44))]
        #[case(6.2257747566909177175372573e+44,     $dec!(6.22577475669091771753725726818021428732887040e+44))]
        #[case(6.2616113715143680380446787e+44,     $dec!(6.26161137151436803804467870051875214824833024e+44))]
        #[case(6.3009938796660060011045471e+44,     $dec!(6.30099387966600600110454712751235962580762624e+44))]
        #[case(6.3429260459731915133839572e+44,     $dec!(6.34292604597319151338395724074191715745923072e+44))]
        #[case(2.5188185359331066252660819e+48,     $dec!(2.518818535933106625266081862029984257585545478144e+48))]
        #[case(2.5228995371175445364848410e+48,     $dec!(2.522899537117544536484840984804012872883142393856e+48))]
        #[case(2.5333801486906641615655208e+48,     $dec!(2.533380148690664161565520797443110478489967394816e+48))]
        #[case(2.5365142696027489736260722e+48,     $dec!(2.536514269602748973626072184847530414233190662144e+48))]
        #[case(1.234e56,                            $dec!(1.23400000000000005373618262723351850501961407365667356672e56))]
        #[case(6e60,                                $dec!(5.999999999999999696322811782444113201781870066080460438503424e60))]
        #[case(3.9786921379831174021989454e+61,     $dec!(3.9786921379831174021989454384313921965637115780960887265820672e+61))]
        #[case(4e61,                                $dec!(3.9999999999999997975485411882960754678545800440536402923356160e+61))]
        #[case(9.9985002049778294410553577e+98,     $dec!(9.99850020497782944105535774663006282468754172846082841529886935151593883529512281371330356243857408e+98))]
        #[case(1.0097332166738847737039193e+99,     $dec!(1.009733216673884773703919318195952998777640559417775854702211230764247544916262248656675653900304384e+99))]
        #[case(9.9833306841350488367466554e+99,     $dec!(9.983330684135048836746655352477521478829232247732214737532068655842871981027128105652700992809992192e+99))]
        #[case(1.0168286519992372611942638e+100,    $dec!(1.0168286519992372611942638135241625267907715220891313635629821642916893529046578079340981332469612544e+100))]
        #[case(1.0170990608575828071044979e+100,    $dec!(1.0170990608575828071044978923019299817627688965595388762099852232098392535483951276608332965483642880e+100))]
        #[case(8.0526853259046229160708936e+150,    $dec!(8.052685325904622916070893603034465333271558739695299231075984175096778726278528811390960566207940375378309094748525771931417317503482400741938121670656e+150))]
        #[case(8.1186216922920370113830758e+150,    $dec!(8.118621692292037011383075811115302851263956472441192911834235096649981803285511896769233701834561110548572224193846640024623396219538084031314872238080e+150))]
        #[case(8.2748662812114286603165636e+150,    $dec!(8.274866281211428660316563601147207525631644549289160947495603730364911321220580798738882162623580170092758054322960183744986788679593067982866809356288e+150))]
        #[case(8.2796586384006620734549493e+150,    $dec!(8.279658638400662073454949298897802258771205872800666955834887034713107013717512974384451063702503786610493536032128188692133981370521289155722916921344e+150))]
        #[case(9.834535283772961e+199,              $dec!(9.834535283772961040735162420851843125057423772346972386932368629674849306778970453447962963930744964249682284153435428408751631240304055645611070126540439e+199))]
        #[case(9.8378644994993713579417969e+199,    $dec!(9.837864499499371357941796859822950422054424957221537257256941132659761180095195146072685661802517462734682662189611511580413724259521190405861044654077452e+199))]
        #[case(1.0023360345713633477200137e+200,    $dec!(1.0023360345713633477200136511930559463147084336319392731583831540163181251914415226543305858300433753988537624016127047032240639814964644432615965487796551e+200))]
        #[case(1.0135492769831001e+200,             $dec!(1.0135492769831000945962237050304497667237890059315144954301935908600355276358201029072267473105882693608866701330490331304623064727186659746463216790413142e+200))]
        #[case(6.781399039501075e+250,              $dec!(6.781399039501075441335622258514625667246597117292023780715567925965624840922862986714824351060934653621114338729067150268792076608518336488986528437180854e+250))]
        #[case(6.887008020285138e+250,              $dec!(6.887008020285138113545876113798962373351410098664269660645036340026455282271088732271281681512401194606335442219147976029999354548651031284248822344992446e+250))]
        #[case(6.9266912679997037950843223e+250,    $dec!(6.926691267999703795084322258171231587243349021842927202846168122734864301111973248231113629042884788117391871343816723578651774067270889377557514331482362e+250))]
        #[case(6.978662266398378e+250,              $dec!(6.978662266398378000554197138982337829473915365690604705202091390388461349442963541164446585894631638200843323361521813941955599862960402482025887009613657e+250))]
        #[case(7.003902528391255e+250,              $dec!(7.003902528391255266273453819149864116908632215350181189291087341078041737532998406333016772435456379619773035793453928635097860294261666526575024519045255e+250))]
        #[case(2.0904474096715698e+256,             $dec!(2.090447409671569789806428311591092584960039820458252094019410098413897409471972879729974892178513575366038201373311871063302287243424225702400159471075523e+256))]
        #[case(2.1112911206571967e+256,             $dec!(2.111291120657196674130546675212511711858123770063065379362272966236767679069018040397641073611274582084252320412528507548583102207501547320274098905841008e+256))]
        #[case(2.1252322738229662e+256,             $dec!(2.125232273822966168686965954011248529047935048704423244702294772364153815716429211354797404966102554296069004298876155912049970183447910917766747611789505e+256))]
        #[case(2.4747288284014702e+265,             $dec!(2.474728828401470181227288308843375363157608042197767526981293498694709405829483473649505868041048684223532228519819635636359084596239878737197240863536014e+265))]
        #[case(2.5128499105657315e+265,             $dec!(2.512849910565731534752875035851094055568558896488379586230152735590693136632874434609945370323178097318133209633195375801449751560019456903319241898488439e+265))]
        #[case(2.5222962946682292e+265,             $dec!(2.522296294668229183761114818927093472348485268421285912694045576615450170922055207295833598757797950469680689081035882846401870463443127992985059594067010e+265))]
        #[case(3.9993332144857384e+278,             $dec!(3.999333214485738381876562396572354832535425218957864311482278463864631850232366837187919243113552437089348817128360779675930314037934905627220719881353533e+278))]
        #[case(4.0131769453694116e+278,             $dec!(4.013176945369411602414088907521855927172917043623177776615160370616227339002139022422076302554911679915514160082733369404539986756420936766566183848945873e+278))]
        #[case(4.03625511532318e+278,               $dec!(4.036255115323180192547115932334677362554896106715166275523805626437297575494902627792237639315061686821886383021838225609694971377054351910033343822321702e+278))]
        #[case(9.725835140774445e+300,              $dec!(9.725835140774444820533275255314273442022417669881759831645231521647434630968473687071620451580417175659301420479855226043318986617262489189567027305916178e+300))]
        #[case(9.9624481981040685461672938e+300,    $dec!(9.962448198104068546167293757248093563676533316932509280009422050308509847128627066091911893893539936305014141741438196752740654666273552115802760907175182e+300))]
        #[case(1.0067445434753657161242754e+301,    $dec!(1.0067445434753657161242753589833723010509372769741938812954369925553680021891029564712119358030010230768847578685976500709968510631580853569680343184653882e+301))]
        #[case(1.0106363259622376e+301,             $dec!(1.010636325962237599501642968262519006186838997570108275672997849408632162177162755626203386225775835095288894018331960925952802715246029257047754294465582e+301))]
        #[case(1.3928539679054934e+304,             $dec!(1.392853967905493377298519870388953431386942504567919186226409386553354197966513375559102176235643261944305925194838759713317035030872318315213415937687698e+304))]
        #[case(1.3929401060432494e+304,             $dec!(1.392940106043249423312719454313213038740770655712539079776581885021312608641643992428595675592718442605084814090513612128987853183563213256833105135906449e+304))]
        #[case(1.4113051027345380297340082e+304,    $dec!(1.411305102734538029734008236870746947932760490381201477574889309317270546340832966421724222634480271942276284653656128999140627706633214182278886190936747e+304))]
        #[case(8.811475779440306e+306,              $dec!(8.811475779440305645785665923022101345970813924502087196773106375166032207861308604263221740754560833396149675809068369501408160690842805888468364832115232e+306))]
        #[case(8.819552330143116e+306,              $dec!(8.819552330143115628727203516983261847111054076263638663127476165940745433256387946789283809400941534634807571980693721465470360657621610014105445212723473e+306))]
        #[case(8.8236895360160520609589637e+306,    $dec!(8.823689536016052060958963700533052867620542861055794031144172121164242327953784663974576626684693018614778966605488165666588369753690946228579866672126286e+306))]
        #[case(8.840145680545442e+306,              $dec!(8.840145680545441718955792828497522491226433883599882771889109136225715027859370349868679551806354249404383281324293938807943347684884125772591541450238939e+306))]
        #[case(8.8707941974065888022588617e+306,    $dec!(8.870794197406588802258861714811041248335787804473190987096676096707923581107265795537250119061967690070264533591095143702794178062610674110757408545663227e+306))]
        #[case(1.7775563255894494e+308,             $dec!(1.777556325589449372264767371929680425565154134125821911775796797267265693700574233715478709224505676378702091020355294558663191157279919098747590503320844e+308))]
        #[case(1.7921161963678207848899291e+308,    $dec!(1.792116196367820784889929088574276952562822449883680012264295876395412445784174808890524157666380028863534807185076075714756993613866914703141143372930232e+308))]
        #[case(1.7941528654416328e+308,             $dec!(1.794152865441632790095194950507657786065238713438693374420957411773864873978081724658200289286413990150474709122922205511686309879112793936703578545128461e+308))]
        #[case(1.7976931348623157e+308,             $dec!(1.797693134862315708145274237317043567980705675258449965989174768031572607800285387605895586327668781715404589535143824642343213268894641827684675467035375e+308))]
        // -------------------------------
        #[case(f64::MIN_POSITIVE,                   $dec!(2.225073858507201383090232717332404064219215980462331830553327416887204434813918195854283159012511020564067339731035811005152434161553460108856012385377719e-308))]
        // -------------------------------
        #[case(core::f64::consts::PI,               $dec!(3.141592653589793115997963468544185161590576171875))]
        #[case(core::f64::consts::E,                $dec!(2.718281828459045090795598298427648842334747314453125))]
        #[case(core::f64::consts::PI * 10000.0,     $dec!(31415.926535897931898944079875946044921875))]
        #[case(core::f64::consts::PI * 30000.0,     $dec!(94247.779607693795696832239627838134765625))]
        // -------------------------------
        #[case(1.0100496620928765,                  $dec!(1.0100496620928765688550188629309144349767606397960224157778542737223358643201592647737053449876265982711742908428428382508956833717859385252894194318074028))]
        #[case(1.0100496620928765,                  $dec!(1.010049662092876499031035564257763326168060302734375))]
        // -------------------------------
        fn test_to_f64_512(#[case] expected: f64, #[case] d: $D) {
            let f = f64::try_from(d).unwrap();
            assert_eq!(f, expected);
            assert_eq!(f.integer_decode(), expected.integer_decode());
        }

        #[rstest(::trace)]
        #[case(40000e-328,                          $dec!(4.940656458412465441765687928682213723650598026143247644255856825006755072702087518652998363616359923797965646954457177309266567103559397963987747960107819e-324))]
        #[case(2.5e-324,                            $dec!(4.940656458412465441765687928682213723650598026143247644255856825006755072702087518652998363616359923797965646954457177309266567103559397963987747960107819e-324))]
        #[case(4e-324,                              $dec!(4.940656458412465441765687928682213723650598026143247644255856825006755072702087518652998363616359923797965646954457177309266567103559397963987747960107819e-324))]
        #[case(4.940656e-324,                       $dec!(4.940656458412465441765687928682213723650598026143247644255856825006755072702087518652998363616359923797965646954457177309266567103559397963987747960107819e-324))]
        #[case(5e-324,                              $dec!(4.940656458412465441765687928682213723650598026143247644255856825006755072702087518652998363616359923797965646954457177309266567103559397963987747960107819e-324))]
        #[case(3.61183919545976e-310,               $dec!(3.611839195459763303393074560311283478386211935084765914886606886450478527728688932245080945945179339482065765867563128521555145290639211870272817990699468e-310))]
        #[case(4.8980019078642963771876647e-310,    $dec!(4.898001907864296377187664701779550074823711338472436561074137599595970894624810124093118307362668762091022275122256939614072602248969143385560350859320361e-310))]
        #[case(1.02638475141096e-309,               $dec!(1.0263847514109591822395668338611244886554001253773237972278775586829724848464113638469412202027210189079974661834145582099566552593539839482270787406092486e-309))]
        #[case(1.2191449367984545884039792e-309,    $dec!(1.2191449367984545884039791878959654902534982195455441881031876096621139792897945871827819244789561126397573454225717380019787014268257151084572391556371437e-309))]
        #[case(1.3586641673566107715029324e-309,    $dec!(1.358664167356610771502932433647561429736298566976393496496660504643976672775939085818621924099693096293697241269318443477828915738359337183271624717846990e-309))]
        #[case(1.5947055924688e-309,                $dec!(1.594705592468800425300752432090154075673743053042775134691564415537373228742222784777660873574039204383093729445976845382501391073825464893147315966616881e-309))]
        #[case(2.1998518992662555e-308,             $dec!(2.199851899266255462840997768964209459941688376378878898858407471410547783294036926539320515073027471114018915528736268282514469850755704408391021287553408e-308))]
        #[case(2.2210609003192465e-308,             $dec!(2.221060900319246452875909158632404497159787089436925346273077332920644056795763078397776269621697441466197290872092089540023028390054773655199458486342209e-308))]
        #[case(2.225073858507201e-308,              $dec!(2.225073858507200889024586876085859887650423112240959465493524802562440009228235695178775888803759155264230978095043431208587738715835729182199302029437922e-308))]
        #[case(2.2250738585071994e-308,             $dec!(2.2250738585071994e-308))]
        #[case(1.0e-308,                            $dec!(0.9999999999999999093266253372484619954704887340320456937072250493316478813410022170236685306110285951575783017584918228243784387925532007637698337754738299e-308))]
        fn test_to_f64_subnormal_512(#[case] expected: f64, #[case] d: $D) {
            let f = f64::try_from(d).unwrap();
            assert_eq!(f, expected);
            assert_eq!(f.integer_decode(), expected.integer_decode());
        }
    };
    (UNSIGNED:: 512, $dec: ident, $D: ident, THIS) => {
        super::test_impl!(UNSIGNED:: 256, $dec, $D);
    };
    (SIGNED:: 512, $dec: ident, $D: ident, THIS) => {
        super::test_impl!(SIGNED:: 256, $dec, $D);

        #[rstest(::trace)]
        #[case(-1.7976931348623157e308, $dec!(-1.797693134862315708145274237317043567980705675258449965989174768031572607800285387605895586327668781715404589535143824642343213268894641827684675467035375e+308))]
        #[case(-2.3509889819e-38,       $dec!(-2.350988981899999809754458784267977344449574846971330400802740014330933327934877246295418973536135720525663828084361739456653594970703125e-38))]
        fn test_to_f64_signed_512(#[case] expected: f64, #[case] d: $D) {
            let f = f64::try_from(d).unwrap();
            assert_eq!(f, expected);
            assert_eq!(f.integer_decode(), expected.integer_decode());
        }
    };


    (COMMON:: 256, $dec: ident, $D: ident, THIS) => {
        super::test_impl!(COMMON:: 256, $dec, $D);

        #[rstest(::trace)]
        #[case(0.1,                                 $dec!(0.1000000000000000055511151231257827021181583404541015625))]
        #[case(0.01,                                $dec!(0.01000000000000000020816681711721685132943093776702880859375))]
        #[case(0.001,                               $dec!(0.001000000000000000020816681711721685132943093776702880859375))]
        #[case(12.34,                               $dec!(12.339999999999999857891452847979962825775146484375))]
        #[case(0.333333333333333333333333333333,    $dec!(0.333333333333333314829616256247390992939472198486328125))]
        #[case(1.0 / 3.0,                           $dec!(0.333333333333333314829616256247390992939472198486328125))]
        #[case(3.0000000000000004,                  $dec!(3.000000000000000444089209850062616169452667236328125))]
        #[case(0.07155292,                          $dec!(0.07155292000000000596227067717336467467248439788818359375))]
        #[case(21509.2,                             $dec!(21509.20000000000072759576141834259033203125))]
        #[case(2.3283064e-10,                       $dec!(2.328306399999999934987650668772826180463741962967105791904032230377197265625e-10))]
        #[case(0.14693861798803098,                 $dec!(0.146938617988030983951830421574413776397705078125))]
        #[case(6.99999952316,                       $dec!(6.9999995231599996259319595992565155029296875))]
        #[case(8.544283616667655e-306,              $dec!(8.5442836166676545758745469881475846986178991076220674838778719735182619591848e-306))]
        #[case(3e300,                               $dec!(3.0000000000000001575142807656132607461134057433244774647475623465354073739667e+300))]
        #[case(2.2250738585072014e-308,             $dec!(2.2250738585072013830902327173324040642192159804623318305533274168872044348139e-308))]
        #[case(2.2422566691339237e-308,             $dec!(2.2422566691339237044137415783242129476705872909803911850327880247450307309977e-308))]
        #[case(2.3241588193064047e-308,             $dec!(2.3241588193064047369548957544806723582507538451786956184581759523074039497502e-308))]
        #[case(2.81341650018752e-308,               $dec!(2.8134165001875198278759275525943498067505063001967969175506480744152639496835e-308))]
        #[case(1.2631319022638611145031529e-306,    $dec!(1.2631319022638611145031529070758022871483812142792533378759590258170069528921e-306))]
        #[case(1.2671120387509150891199084e-306,    $dec!(1.2671120387509150891199083562860236053872069415970357264939837482037218136532e-306))]
        #[case(1.2804061026577255385094242e-306,    $dec!(1.2804061026577255385094242463246367396679403922571399974203587875931690949628e-306))]
        #[case(1.2808359567839928645092757e-306,    $dec!(1.2808359567839928645092757224566786919082509283609026772675128671671646994900e-306))]
        #[case(1.2858515622241412169625257e-306,    $dec!(1.2858515622241412169625256880945589955714289483254260169547948440791488506807e-306))]
        #[case(1.299253504365148e-306,              $dec!(1.2992535043651480409998195196072986695196161472335325195319691026267253060163e-306))]
        #[case(3.3077876175268485200051509e-10,     $dec!(3.30778761752684852000515090556724377701680595009747776202857494354248046875e-10))]
        #[case(3.3137813483196602609126409e-10,     $dec!(3.3137813483196602609126408842490398021229935920928255654871463775634765625e-10))]
        #[case(3.31402461029028927442e-10,          $dec!(3.314024610290289274416863918304443359375e-10))]
        #[case(3.8545798589014332545116763e-10,     $dec!(3.85457985890143325451167632389177890306353191363086807541549205780029296875e-10))]
        #[case(3.8589640404354976528186133e-10,     $dec!(3.85896404043549765281861325450819821814008037108578719198703765869140625e-10))]
        #[case(3.86070259095205869926e-10,          $dec!(3.860702590952058699258486740291118621826171875e-10))]
        #[case(5.6342475626375463906655146e-10,     $dec!(5.634247562637546390665514600714670889747281989912153221666812896728515625e-10))]
        #[case(5.63556035171330904632e-10,          $dec!(5.63556035171330904631759040057659149169921875e-10))]
        #[case(5.6472809385237609665289329e-10,     $dec!(5.6472809385237609665289328672414803644841185814584605395793914794921875e-10))]
        #[case(5.65448687872560640244e-10,          $dec!(5.6544868787256064024404622614383697509765625e-10))]
        #[case(4.5419401324200408134839199e+42,     $dec!(4.541940132420040813483919915281692168814592e+42))]
        #[case(4.5691506753016354231242665e+42,     $dec!(4.569150675301635423124266480895704849973248e+42))]
        #[case(4.5852629045946275118908509e+42,     $dec!(4.585262904594627511890850850494634398842880e+42))]
        #[case(4.6282141802359669439365684e+42,     $dec!(4.628214180235966943936568431604864403898368e+42))]
        #[case(4.7242839265893572523021356e+42,     $dec!(4.724283926589357252302135592326889063055360e+42))]
        #[case(4.7757777454975695896809304e+42,     $dec!(4.775777745497569589680930382281188699013120e+42))]
        #[case(5.8000785913135992383902788e+44,     $dec!(5.80007859131359923839027879616849202680692736e+44))]
        #[case(5.8213737603962721732779450e+44,     $dec!(5.82137376039627217327794499509359422428151808e+44))]
        #[case(5.8255115792434116359518203e+44,     $dec!(5.82551157924341163595182034711193753233653760e+44))]
        #[case(5.8497446985666636477213860e+44,     $dec!(5.84974469856666364772138601846135994099695616e+44))]
        #[case(5.8880224454499436171530479e+44,     $dec!(5.88802244544994361715304790038597259409489920e+44))]
        #[case(5.9390128508959945194140647e+44,     $dec!(5.93901285089599451941406469331719789045874688e+44))]
        #[case(5.9441029824874393645952206e+44,     $dec!(5.94410298248743936459522055200602595474276352e+44))]
        #[case(5.9603855972916670819078105e+44,     $dec!(5.96038559729166708190781052366055712701284352e+44))]
        #[case(6.0411537776206233681185935e+44,     $dec!(6.04115377762062336811859353921780001814872064e+44))]
        #[case(6.0444476645473522470246937e+44,     $dec!(6.04444766454735224702469367152032624985243648e+44))]
        #[case(6.0723014722453062731189188e+44,     $dec!(6.07230147224530627311891883483318805115961344e+44))]
        #[case(6.0745149893217041224896335e+44,     $dec!(6.07451498932170412248963346062943791395897344e+44))]
        #[case(6.1226218997252336013385513e+44,     $dec!(6.12262189972523360133855129654153525856305152e+44))]
        #[case(6.1472280189627291293532713e+44,     $dec!(6.14722801896272912935327126482695494685425664e+44))]
        #[case(6.2257747566909177175372573e+44,     $dec!(6.22577475669091771753725726818021428732887040e+44))]
        #[case(6.2616113715143680380446787e+44,     $dec!(6.26161137151436803804467870051875214824833024e+44))]
        #[case(6.3009938796660060011045471e+44,     $dec!(6.30099387966600600110454712751235962580762624e+44))]
        #[case(6.3429260459731915133839572e+44,     $dec!(6.34292604597319151338395724074191715745923072e+44))]
        #[case(2.5188185359331066252660819e+48,     $dec!(2.518818535933106625266081862029984257585545478144e+48))]
        #[case(2.5228995371175445364848410e+48,     $dec!(2.522899537117544536484840984804012872883142393856e+48))]
        #[case(2.5333801486906641615655208e+48,     $dec!(2.533380148690664161565520797443110478489967394816e+48))]
        #[case(2.5365142696027489736260722e+48,     $dec!(2.536514269602748973626072184847530414233190662144e+48))]
        #[case(1.234e56,                            $dec!(1.23400000000000005373618262723351850501961407365667356672e56))]
        #[case(6e60,                                $dec!(5.999999999999999696322811782444113201781870066080460438503424e60))]
        #[case(3.9786921379831174021989454e+61,     $dec!(3.9786921379831174021989454384313921965637115780960887265820672e+61))]
        #[case(4e61,                                $dec!(3.9999999999999997975485411882960754678545800440536402923356160e+61))]
        #[case(9.99850020497783e+98,                $dec!(9.9985002049778294410553577466300628246875417284608284152988693515159388352951e+98))]
        #[case(1.0097332166738847737039193e+99,     $dec!(1.00973321667388477370391931819595299877764055941777585470221123076424754491626e+99))]
        #[case(9.983330684135049e+99,               $dec!(9.9833306841350488367466553524775214788292322477322147375320686558428719810271e+99))]
        #[case(1.0168286519992372611942638e+100,    $dec!(1.01682865199923726119426381352416252679077152208913136356298216429168935290466e+100))]
        #[case(1.0170990608575828071044979e+100,    $dec!(1.0170990608575828071044978923019299817627688965595388762099852232098392535484e+100))]
        #[case(8.052685325904623e+150,              $dec!(8.0526853259046229160708936030344653332715587396952992310759841750967787262785e+150))]
        #[case(8.1186216922920370113830758e+150,    $dec!(8.1186216922920370113830758111153028512639564724411929118342350966499818032855e+150))]
        #[case(8.2748662812114286603165636e+150,    $dec!(8.2748662812114286603165636011472075256316445492891609474956037303649113212206e+150))]
        #[case(8.279658638400662e+150,              $dec!(8.2796586384006620734549492988978022587712058728006669558348870347131070137175e+150))]
        #[case(9.834535283772961e+199,              $dec!(9.8345352837729610407351624208518431250574237723469723869323686296748493067790e+199))]
        #[case(9.8378644994993713579417969e+199,    $dec!(9.8378644994993713579417968598229504220544249572215372572569411326597611800952e+199))]
        #[case(1.0023360345713633477200137e+200,    $dec!(1.00233603457136334772001365119305594631470843363193927315838315401631812519144e+200))]
        #[case(1.0135492769831001e+200,             $dec!(1.01354927698310009459622370503044976672378900593151449543019359086003552763582e+200))]
        #[case(6.781399039501075e+250,              $dec!(6.7813990395010754413356222585146256672465971172920237807155679259656248409229e+250))]
        #[case(6.887008020285138e+250,              $dec!(6.8870080202851381135458761137989623733514100986642696606450363400264552822711e+250))]
        #[case(6.9266912679997037950843223e+250,    $dec!(6.9266912679997037950843222581712315872433490218429272028461681227348643011120e+250))]
        #[case(6.978662266398378e+250,              $dec!(6.9786622663983780005541971389823378294739153656906047052020913903884613494430e+250))]
        #[case(7.003902528391255e+250,              $dec!(7.0039025283912552662734538191498641169086322153501811892910873410780417375330e+250))]
        #[case(2.0904474096715698e+256,             $dec!(2.0904474096715697898064283115910925849600398204582520940194100984138974094720e+256))]
        #[case(2.1112911206571967e+256,             $dec!(2.1112911206571966741305466752125117118581237700630653793622729662367676790690e+256))]
        #[case(2.1252322738229661686869660e+256,    $dec!(2.1252322738229661686869659540112485290479350487044232447022947723641538157164e+256))]
        #[case(2.4747288284014701812272883e+265,    $dec!(2.4747288284014701812272883088433753631576080421977675269812934986947094058295e+265))]
        #[case(2.5128499105657315e+265,             $dec!(2.5128499105657315347528750358510940555685588964883795862301527355906931366329e+265))]
        #[case(2.5222962946682291837611148e+265,    $dec!(2.5222962946682291837611148189270934723484852684212859126940455766154501709221e+265))]
        #[case(3.9993332144857384e+278,             $dec!(3.9993332144857383818765623965723548325354252189578643114822784638646318502324e+278))]
        #[case(4.0131769453694116e+278,             $dec!(4.0131769453694116024140889075218559271729170436231777766151603706162273390021e+278))]
        #[case(4.03625511532318e+278,               $dec!(4.0362551153231801925471159323346773625548961067151662755238056264372975754949e+278))]
        #[case(9.725835140774445e+300,              $dec!(9.7258351407744448205332752553142734420224176698817598316452315216474346309685e+300))]
        #[case(9.9624481981040685461672938e+300,    $dec!(9.9624481981040685461672937572480935636765333169325092800094220503085098471286e+300))]
        #[case(1.0067445434753657161242754e+301,    $dec!(1.0067445434753657161242753589833723010509372769741938812954369925553680021891e+301))]
        #[case(1.0106363259622376e+301,             $dec!(1.01063632596223759950164296826251900618683899757010827567299784940863216217716e+301))]
        #[case(1.3928539679054933772985199e+304,    $dec!(1.3928539679054933772985198703889534313869425045679191862264093865533541979665e+304))]
        #[case(1.3929401060432494e+304,             $dec!(1.3929401060432494233127194543132130387407706557125390797765818850213126086416e+304))]
        #[case(1.4113051027345380297340082e+304,    $dec!(1.4113051027345380297340082368707469479327604903812014775748893093172705463408e+304))]
        #[case(8.811475779440306e+306,              $dec!(8.8114757794403056457856659230221013459708139245020871967731063751660322078613e+306))]
        #[case(8.819552330143116e+306,              $dec!(8.8195523301431156287272035169832618471110540762636386631274761659407454332564e+306))]
        #[case(8.8236895360160520609589637e+306,    $dec!(8.8236895360160520609589637005330528676205428610557940311441721211642423279538e+306))]
        #[case(8.840145680545442e+306,              $dec!(8.8401456805454417189557928284975224912264338835998827718891091362257150278594e+306))]
        #[case(8.8707941974065888022588617e+306,    $dec!(8.8707941974065888022588617148110412483357878044731909870966760967079235811073e+306))]
        #[case(1.7775563255894494e+308,             $dec!(1.7775563255894493722647673719296804255651541341258219117757967972672656937006e+308))]
        #[case(1.7921161963678207848899291e+308,    $dec!(1.7921161963678207848899290885742769525628224498836800122642958763954124457842e+308))]
        #[case(1.7941528654416328e+308,             $dec!(1.7941528654416327900951949505076577860652387134386933744209574117738648739781e+308))]
        #[case(1.7976931348623157e+308,             $dec!(1.7976931348623157081452742373170435679807056752584499659891747680315726078002e+308))]
        // -------------------------------
        #[case(core::f64::consts::PI, $dec!(3.141592653589793115997963468544185161590576171875))]
        #[case(core::f64::consts::E,  $dec!(2.718281828459045090795598298427648842334747314453125))]
        #[case(core::f64::consts::PI * 10000.0, $dec!(31415.926535897931898944079875946044921875))]
        #[case(core::f64::consts::PI * 30000.0, $dec!(94247.779607693795696832239627838134765625))]
        // -------------------------------
        fn test_to_f64_256(#[case] expected: f64, #[case] d: $D) {
            let f = f64::try_from(d).unwrap();
            assert_eq!(f, expected);
            assert_eq!(f.integer_decode(), expected.integer_decode());
        }

        #[rstest(::trace)]
        #[case(1e-308,                              $dec!(0.999999999999999909326625337248461995470488734032045693707225049331647881341e-308))]
        #[case(4.940656e-324,                       $dec!(4.9406564584124654417656879286822137236505980261432476442558568250067550727021e-324))]
        #[case(40000e-328,                          $dec!(4.9406564584124654417656879286822137236505980261432476442558568250067550727021e-324))]
        #[case(2.5e-324,                            $dec!(4.9406564584124654417656879286822137236505980261432476442558568250067550727021e-324))]
        #[case(4e-324,                              $dec!(4.9406564584124654417656879286822137236505980261432476442558568250067550727021e-324))]
        #[case(5e-324,                              $dec!(4.9406564584124654417656879286822137236505980261432476442558568250067550727021e-324))]
        #[case(3.6118391954597633033930746e-310,    $dec!(3.6118391954597633033930745603112834783862119350847659148866068864504785277287e-310))]
        #[case(4.8980019078643e-310,                $dec!(4.8980019078642963771876647017795500748237113384724365610741375995959708946248e-310))]
        #[case(1.02638475141096e-309,               $dec!(1.02638475141095918223956683386112448865540012537732379722787755868297248484641e-309))]
        #[case(1.2191449367984545884039792e-309,    $dec!(1.2191449367984545884039791878959654902534982195455441881031876096621139792898e-309))]
        #[case(1.35866416735661e-309,               $dec!(1.3586641673566107715029324336475614297362985669763934964966605046439766727759e-309))]
        #[case(1.5947055924688e-309,                $dec!(1.5947055924688004253007524320901540756737430530427751346915644155373732287422e-309))]
        #[case(2.1998518992662555e-308,             $dec!(2.1998518992662554628409977689642094599416883763788788988584074714105477832940e-308))]
        #[case(2.2210609003192465e-308,             $dec!(2.2210609003192464528759091586324044971597870894369253462730773329206440567958e-308))]
        #[case(2.225073858507201e-308,              $dec!(2.2250738585072008890245868760858598876504231122409594654935248025624400092282e-308))]
        fn test_to_f64_subnormal_256(#[case] expected: f64, #[case] d: $D) {
            let f = f64::try_from(d).unwrap();
            assert_eq!(f, expected);
            assert_eq!(f.integer_decode(), expected.integer_decode());
        }
    };
    (COMMON:: 256, $dec: ident, $D: ident) => {
        super::test_impl!(COMMON:: 128, $dec, $D);
    };
    (UNSIGNED:: 256, $dec: ident, $D: ident, THIS) => {
        super::test_impl!(UNSIGNED:: 256, $dec, $D);
    };
    (UNSIGNED:: 256, $dec: ident, $D: ident) => {
        super::test_impl!(UNSIGNED:: 128, $dec, $D);
    };
    (SIGNED:: 256, $dec: ident, $D: ident, THIS) => {
        super::test_impl!(SIGNED:: 256, $dec, $D);

        #[rstest(::trace)]
        #[case(-1.7976931348623157e308, $dec!(-1.7976931348623157081452742373170435679807056752584499659891747680315726078003e+308))]
        #[case(-2.3509889819e-38, $dec!(-2.3509889818999998097544587842679773444495748469713304008027400143309333279349e-38))]
        fn test_to_f64_signed_256(#[case] expected: f64, #[case] d: $D) {
            let f = f64::try_from(d).unwrap();
            assert_eq!(f, expected);
            assert_eq!(f.integer_decode(), expected.integer_decode());
        }
    };
    (SIGNED:: 256, $dec: ident, $D: ident) => {
        super::test_impl!(SIGNED:: 128, $dec, $D);
    };

    (COMMON:: 128, $dec: ident, $D: ident, THIS) => {
        super::test_impl!(COMMON:: 128, $dec, $D);

        #[rstest(::trace)]
        #[case(0.1,                                 $dec!(0.100000000000000005551115123125782702119))]
        #[case(0.01,                                $dec!(0.01000000000000000020816681711721685133))]
        #[case(0.001,                               $dec!(0.001000000000000000020816681711721685133))]
        #[case(12.34,                               $dec!(12.3399999999999998578914528479799628258))]
        #[case(0.333333333333333333333333333333,    $dec!(0.333333333333333314829616256247390992940))]
        #[case(1.0 / 3.0,                           $dec!(0.333333333333333314829616256247390992940))]
        #[case(3.0000000000000004,                  $dec!(3.00000000000000044408920985006261617))]
        #[case(0.07155292,                          $dec!(0.071552920000000005962270677173364674673))]
        #[case(21509.2,                             $dec!(21509.2000000000007275957614183426))]
        #[case(2.3283064e-10,                       $dec!(2.32830639999999993498765066877282618046e-10))]
        #[case(0.14693861798803098,                 $dec!(0.146938617988030983951830421574413776398))]
        #[case(6.99999952316,                       $dec!(6.9999995231599996259319595992565155029))]
        #[case(8.544283616667655e-306,              $dec!(8.5442836166676545758745469881475846986e-306))]
        #[case(3e300,                               $dec!(3.00000000000000015751428076561326074611e+300))]
        #[case(2.22507385850720138309e-308,         $dec!(2.22507385850720138309023271733240406422e-308))]
        #[case(2.2422566691339237e-308,             $dec!(2.24225666913392370441374157832421294767e-308))]
        #[case(2.3241588193064047e-308,             $dec!(2.32415881930640473695489575448067235825e-308))]
        #[case(2.81341650018752e-308,               $dec!(2.81341650018751982787592755259434980675e-308))]
        #[case(1.2631319022638611e-306,             $dec!(1.26313190226386111450315290707580228715e-306))]
        #[case(1.2671120387509150891199084e-306,    $dec!(1.26711203875091508911990835628602360539e-306))]
        #[case(1.2804061026577255385094242e-306,    $dec!(1.28040610265772553850942424632463673967e-306))]
        #[case(1.2808359567839928645092757e-306,    $dec!(1.28083595678399286450927572245667869191e-306))]
        #[case(1.2858515622241412e-306,             $dec!(1.28585156222414121696252568809455899557e-306))]
        #[case(1.2992535043651480409998195e-306,    $dec!(1.29925350436514804099981951960729866952e-306))]
        #[case(3.3077876175268485200051509e-10,     $dec!(3.30778761752684852000515090556724377702e-10))]
        #[case(3.3137813483196603e-10,              $dec!(3.31378134831966026091264088424903980212e-10))]
        #[case(3.31402461029028927442e-10,          $dec!(3.31402461029028927441686391830444335938e-10))]
        #[case(3.8545798589014332545116763e-10,     $dec!(3.8545798589014332545116763238917789031e-10))]
        #[case(3.8589640404354977e-10,              $dec!(3.8589640404354976528186132545081982181e-10))]
        #[case(3.8607025909520587e-10,              $dec!(3.8607025909520586992584867402911186218e-10))]
        #[case(5.6342475626375463906655146e-10,     $dec!(5.6342475626375463906655146007146708898e-10))]
        #[case(5.63556035171330904632e-10,          $dec!(5.6355603517133090463175904005765914917e-10))]
        #[case(5.6472809385237609665289329e-10,     $dec!(5.6472809385237609665289328672414803645e-10))]
        #[case(5.65448687872560640244e-10,          $dec!(5.6544868787256064024404622614383697510e-10))]
        #[case(4.541940132420041e42,                $dec!(4.5419401324200408134839199152816921688e+42))]
        #[case(4.5691506753016354231242665e+42,     $dec!(4.5691506753016354231242664808957048500e+42))]
        #[case(4.5852629045946275e42,               $dec!(4.5852629045946275118908508504946343988e+42))]
        #[case(4.628214180235967e42,                $dec!(4.6282141802359669439365684316048644039e+42))]
        #[case(4.7242839265893572523021356e+42,     $dec!(4.7242839265893572523021355923268890631e+42))]
        #[case(4.7757777454975696e42,               $dec!(4.7757777454975695896809303822811886990e+42))]
        #[case(5.800078591313599e44,                $dec!(5.8000785913135992383902787961684920268e+44))]
        #[case(5.8213737603962721732779450e+44,     $dec!(5.8213737603962721732779449950935942243e+44))]
        #[case(5.8255115792434116359518203e+44,     $dec!(5.8255115792434116359518203471119375323e+44))]
        #[case(5.849744698566664e44,                $dec!(5.849744698566663647721386018461359941e+44))]
        #[case(5.888022445449944e44,                $dec!(5.8880224454499436171530479003859725941e+44))]
        #[case(5.9390128508959945194140647e+44,     $dec!(5.9390128508959945194140646933171978905e+44))]
        #[case(5.944102982487439e+44,               $dec!(5.9441029824874393645952205520060259547e+44))]
        #[case(5.960385597291667e+44,               $dec!(5.9603855972916670819078105236605571270e+44))]
        #[case(6.041153777620623e+44,               $dec!(6.0411537776206233681185935392178000182e+44))]
        #[case(6.044447664547352e+44,               $dec!(6.0444476645473522470246936715203262499e+44))]
        #[case(6.072301472245306e+44,               $dec!(6.0723014722453062731189188348331880512e+44))]
        #[case(6.074514989321704e+44,               $dec!(6.0745149893217041224896334606294379140e+44))]
        #[case(6.1226218997252336013385513e+44,     $dec!(6.1226218997252336013385512965415352586e+44))]
        #[case(6.147228018962729e+44,               $dec!(6.1472280189627291293532712648269549469e+44))]
        #[case(6.225774756690918e+44,               $dec!(6.2257747566909177175372572681802142873e+44))]
        #[case(6.261611371514368e+44,               $dec!(6.2616113715143680380446787005187521483e+44))]
        #[case(6.300993879666006e+44,               $dec!(6.3009938796660060011045471275123596258e+44))]
        #[case(6.3429260459731915e+44,              $dec!(6.3429260459731915133839572407419171575e+44))]
        #[case(2.5188185359331066e+48,              $dec!(2.51881853593310662526608186202998425759e+48))]
        #[case(2.5228995371175445e+48,              $dec!(2.52289953711754453648484098480401287288e+48))]
        #[case(2.533380148690664e+48,               $dec!(2.53338014869066416156552079744311047849e+48))]
        #[case(2.536514269602749e+48,               $dec!(2.53651426960274897362607218484753041423e+48))]
        #[case(1.234e56,                            $dec!(1.23400000000000005373618262723351850502e56))]
        #[case(1.2340000000000003e56,               $dec!(1.2340000000000003e+56))]
        #[case(6E60,                                $dec!(5.9999999999999996963228117824441132018e60))]
        #[case(3.9786921379831174021989454e+61,     $dec!(3.9786921379831174021989454384313921966e+61))]
        #[case(4E61,                                $dec!(3.9999999999999997975485411882960754679e+61))]
        #[case(9.99850020497783e+98,                $dec!(9.9985002049778294410553577466300628247e+98))]
        #[case(1.0097332166738847737039193e+99,     $dec!(1.00973321667388477370391931819595299878e+99))]
        #[case(9.983330684135049e+99,               $dec!(9.9833306841350488367466553524775214788e+99))]
        #[case(1.0168286519992372611942638e+100,    $dec!(1.01682865199923726119426381352416252679e+100))]
        #[case(1.0170990608575828071044979e+100,    $dec!(1.01709906085758280710449789230192998176e+100))]
        #[case(8.052685325904623e+150,              $dec!(8.0526853259046229160708936030344653333e+150))]
        #[case(8.1186216922920370113830758e+150,    $dec!(8.1186216922920370113830758111153028513e+150))]
        #[case(8.2748662812114286603165636e+150,    $dec!(8.2748662812114286603165636011472075256e+150))]
        #[case(8.279658638400662e+150,              $dec!(8.2796586384006620734549492988978022588e+150))]
        #[case(9.8345352837729610407351624e+199,    $dec!(9.8345352837729610407351624208518431251e+199))]
        #[case(9.837864499499371e+199,              $dec!(9.8378644994993713579417968598229504221e+199))]
        #[case(1.0023360345713633e+200,             $dec!(1.00233603457136334772001365119305594632e+200))]
        #[case(1.0135492769831001e+200,             $dec!(1.01354927698310009459622370503044976672e+200))]
        #[case(6.781399039501075e+250,              $dec!(6.7813990395010754413356222585146256673e+250))]
        #[case(6.8870080202851381135458761e+250,    $dec!(6.8870080202851381135458761137989623734e+250))]
        #[case(6.926691267999704e+250,              $dec!(6.9266912679997037950843222581712315872e+250))]
        #[case(6.978662266398378e+250,              $dec!(6.9786622663983780005541971389823378295e+250))]
        #[case(7.0039025283912552662734538e+250,    $dec!(7.0039025283912552662734538191498641169e+250))]
        #[case(2.0904474096715698e+256,             $dec!(2.09044740967156978980642831159109258496e+256))]
        #[case(2.1112911206571967e+256,             $dec!(2.11129112065719667413054667521251171186e+256))]
        #[case(2.1252322738229662e+256,             $dec!(2.12523227382296616868696595401124852905e+256))]
        #[case(2.4747288284014702e+265,             $dec!(2.47472882840147018122728830884337536316e+265))]
        #[case(2.5128499105657315e+265,             $dec!(2.51284991056573153475287503585109405557e+265))]
        #[case(2.5222962946682292e+265,             $dec!(2.52229629466822918376111481892709347235e+265))]
        #[case(3.9993332144857383818765624e+278,    $dec!(3.9993332144857383818765623965723548325e+278))]
        #[case(4.0131769453694116024140889e+278,    $dec!(4.0131769453694116024140889075218559272e+278))]
        #[case(4.0362551153231801925471159e+278,    $dec!(4.0362551153231801925471159323346773626e+278))]
        #[case(9.725835140774445e+300,              $dec!(9.7258351407744448205332752553142734420e+300))]
        #[case(9.9624481981040685461672938e+300,    $dec!(9.9624481981040685461672937572480935637e+300))]
        #[case(1.0067445434753657161242754e+301,    $dec!(1.00674454347536571612427535898337230105e+301))]
        #[case(1.0106363259622376e+301,             $dec!(1.01063632596223759950164296826251900619e+301))]
        #[case(1.3928539679054933772985199e+304,    $dec!(1.39285396790549337729851987038895343139e+304))]
        #[case(1.3929401060432494e+304,             $dec!(1.39294010604324942331271945431321303874e+304))]
        #[case(1.4113051027345380297340082e+304,    $dec!(1.41130510273453802973400823687074694793e+304))]
        #[case(8.811475779440306e+306,              $dec!(8.8114757794403056457856659230221013460e+306))]
        #[case(8.819552330143116e+306,              $dec!(8.8195523301431156287272035169832618471e+306))]
        #[case(8.8236895360160520609589637e+306,    $dec!(8.8236895360160520609589637005330528676e+306))]
        #[case(8.840145680545442e+306,              $dec!(8.8401456805454417189557928284975224912e+306))]
        #[case(8.8707941974065888022588617e+306,    $dec!(8.8707941974065888022588617148110412483e+306))]
        #[case(1.7775563255894494e+308,             $dec!(1.77755632558944937226476737192968042557e+308))]
        #[case(1.7921161963678207848899291e+308,    $dec!(1.79211619636782078488992908857427695256e+308))]
        #[case(1.7941528654416328e+308,             $dec!(1.79415286544163279009519495050765778607e+308))]
        // -------------------------------
        #[case(f64::MIN_POSITIVE,                   $dec!(2.22507385850720138309023271733240406422e-308))]
        // -------------------------------
        fn test_to_f64_128(#[case] expected: f64, #[case] d: $D) {
            let f = f64::try_from(d).unwrap();
            assert_eq!(f, expected);
            assert_eq!(f.integer_decode(), expected.integer_decode());
        }

        #[rstest(::trace)]
        #[case(1.0e-308,                            $dec!(0.9999999999999999093266253372484619955e-308))]
        #[case(4.940656e-324,                       $dec!(4.9406564584124654417656879286822137237e-324))]
        #[case(40000e-328,                          $dec!(4.9406564584124654417656879286822137237e-324))]
        #[case(2.5e-324,                            $dec!(4.9406564584124654417656879286822137237e-324))]
        #[case(4e-324,                              $dec!(4.9406564584124654417656879286822137237e-324))]
        #[case(5e-324,                              $dec!(4.9406564584124654417656879286822137237e-324))]
        #[case(3.6118391954597633033930746e-310,    $dec!(3.6118391954597633033930745603112834784e-310))]
        #[case(4.8980019078643e-310,                $dec!(4.8980019078642963771876647017795500748e-310))]
        #[case(1.0263847514109591822395668e-309,    $dec!(1.02638475141095918223956683386112448866e-309))]
        #[case(1.21914493679845e-309,               $dec!(1.21914493679845e-309))]
        #[case(1.219144936798455e-309,              $dec!(1.21914493679845458840397918789596549025e-309))]
        #[case(1.3586641673566107715029324e-309,    $dec!(1.35866416735661077150293243364756142974e-309))]
        #[case(1.5947055924688e-309,                $dec!(1.59470559246880042530075243209015407567e-309))]
        #[case(1.594705592468795e-309,              $dec!(1.594705592468795e-309))]
        #[case(2.2170479421312915e-308,             $dec!(2.2170479421312915e-308))]
        #[case(2.225073858507201e-308,              $dec!(2.22507385850720088902458687608585988765e-308))]
        fn test_to_f64_subnormal_128(#[case] expected: f64, #[case] d: $D) {
            let f = f64::try_from(d).unwrap();
            assert_eq!(f, expected);
            assert_eq!(f.integer_decode(), expected.integer_decode());
        }
    };
    (COMMON:: 128, $dec: ident, $D: ident) => {
        $crate::decimal::common::to::float::to_float!(TO f64, $dec, $D);
        $crate::decimal::common::to::float::to_float!(TO INF f64, $dec, $D);
        $crate::decimal::common::to::float::to_float!(TO NAN f64, $dec, $D);

        #[rstest(::trace)]
        #[case(f64::EPSILON, $dec!(2.220446049250313080847263336181640625e-16))]
        #[case(2289620000.0, $dec!(2289620000))]
        #[case(80000197e0, $dec!(80000197))]
        #[case(1e20, $dec!(100000000000000000000))]
        #[case(1e30, $dec!(1000000000000000019884624838656))]
        #[case(1e38, $dec!(99999999999999997748809823456034029568))]
        #[case(317e36, $dec!(317000000000000010053141138001136451584))]
        #[case(4294967295., $dec!(4294967295))]
        #[case(1.58456325029e+29, $dec!(158456325029000005035589894144))]
        // --------------------------------------
        #[case(5.32859303348232060671e-08, $dec!(5.328593033482320606708526611328125E-8))]
        #[case(5.37413598067359998822e-08, $dec!(5.3741359806735999882221221923828125E-8))]
        #[case(7.68012569096754305065e-08, $dec!(7.68012569096754305064678192138671875E-8))]
        // --------------------------------------
        #[case(7.07530566406250000000e+03, $dec!(7075.3056640625))]
        #[case(7.53498828125000000000e+03, $dec!(7534.98828125))]
        // --------------------------------------
        #[case(4.4527979718522056937217712e+07, $dec!(44527979.71852205693721771240234375))]
        #[case(4.4544658369877748191356659e+07, $dec!(44544658.369877748191356658935546875))]
        #[case(44544759.0, $dec!(44544759))]
        #[case(44551385.0, $dec!(44551385))]
        #[case(4.4557002552595533430576324e+07, $dec!(44557002.552595533430576324462890625))]
        #[case(4.4565242752683423459529877e+07, $dec!(44565242.752683423459529876708984375))]
        #[case(4.4585347692248187959194183e+07, $dec!(44585347.692248187959194183349609375))]
        #[case(48848827.0, $dec!(48848827))]
        #[case(4.8852082564438313245773315e+07, $dec!(48852082.5644383132457733154296875))]
        #[case(4.8855815862494267523288727e+07, $dec!(48855815.862494267523288726806640625))]
        #[case(48856683.0, $dec!(48856683))]
        #[case(4.8867820768270149827003479e+07, $dec!(48867820.76827014982700347900390625))]
        #[case(48876326.0, $dec!(48876326))]
        #[case(48881107.0, $dec!(48881107))]
        #[case(48926583.0, $dec!(48926583))]
        #[case(48928406.0, $dec!(48928406))]
        #[case(4.8929288736255101859569550e+07, $dec!(48929288.736255101859569549560546875))]
        #[case(48931987.0, $dec!(48931987))]
        #[case(48943404.0, $dec!(48943404))]
        #[case(48955612.0, $dec!(48955612))]
        #[case(4.8955612076849408447742462e+07, $dec!(48955612.076849408447742462158203125))]
        // --------------------------------------
        #[case(5.9810222973491929471492767e+07, $dec!(59810222.973491929471492767333984375))]
        #[case(5.9810413753676123917102814e+07, $dec!(59810413.753676123917102813720703125))]
        #[case(59820705.0, $dec!(59820705))]
        #[case(59824993.0, $dec!(59824993))]
        #[case(59831288.0, $dec!(59831288))]
        #[case(59842964.0, $dec!(59842964))]
        #[case(5.98573520000000000000e+07, $dec!(59857352))]
        #[case(59861615.0, $dec!(59861615))]
        #[case(59865513.0, $dec!(59865513))]
        #[case(59879005.0, $dec!(59879005))]
        #[case(59881678.0, $dec!(59881678))]
        #[case(5.9890004528405539691448212e+07, $dec!(59890004.528405539691448211669921875))]
        #[case(5.9891992291817367076873779e+07, $dec!(59891992.291817367076873779296875))]
        // --------------------------------------
        #[case(6.8219579945513530000000000e+15, $dec!(6821957994551353))]
        #[case(6821957994551353.0, $dec!(6821957994551353))]
        #[case(6822030700292186.0, $dec!(6822030700292186))]
        #[case(6822094696702589.0, $dec!(6822094696702589))]
        #[case(6822124271197177.0, $dec!(6822124271197177))]
        #[case(6822277037353397.0, $dec!(6822277037353397))]
        #[case(6822292427348304.0, $dec!(6822292427348304))]
        #[case(6822664104366809.0, $dec!(6822664104366809))]
        #[case(6822811932211983.0, $dec!(6822811932211983))]
        #[case(6823042493314848.0, $dec!(6823042493314848))]
        #[case(6823290530554088.0, $dec!(6823290530554088))]
        #[case(6823534405574519.0, $dec!(6823534405574519))]
        // --------------------------------------
        #[case(2213441751156314785475843.0, $dec!(2213441751156314886635520))]
        #[case(2219335076667272672057152.0, $dec!(2219335076667272634302464))]
        #[case(2223935624494254150390625.0, $dec!(2223935624494254074626048))]
        #[case(2226271980218888521194458.0, $dec!(2226271980218888612741120))]
        #[case(2233472737861264031380415.0, $dec!(2233472737861264130179072))]
        #[case(2234227125422418466769159.0, $dec!(2234227125422418575753216))]
        #[case(2237411785158958740234375.0, $dec!(2237411785158958646296576))]
        #[case(2240836219055907428264618.0, $dec!(2240836219055907314597888))]
        #[case(2258349788355744552612305.0, $dec!(2258349788355744531218432))]
        #[case(2261623325388749084472656.0, $dec!(2261623325388749175521280))]
        #[case(2262063532731965929269791.0, $dec!(2262063532731965911334912))]
        #[case(2.26486371136913625894e+24, $dec!(2264863711369136258940928))]
        #[case(4.4585291299021144726074510e+31, $dec!(44585291299021144726074510278656))]
        #[case(4.4952082508289858357576149e+31, $dec!(44952082508289858357576148713472))]
        #[case(4.5147877395506832111918683e+31, $dec!(45147877395506832111918682996736))]
        #[case(4.5575646453069159675280455e+31, $dec!(45575646453069159675280454844416))]
        #[case(4.6259174148570021662985858e+31, $dec!(46259174148570021662985858056192))]
        #[case(4.63171929063362893477e+31, $dec!(46317192906336289347698513936384))]
        // --------------------------------------
        #[case(1.18764029729362424636e+36, $dec!(1187640297293624246362435789162283008))]
        #[case(1.1904388149772735531044075e+36, $dec!(1190438814977273553104407521239498752))]
        #[case(1.1921732972805283939839020e+36, $dec!(1192173297280528393983902010363084800))]
        #[case(1.2004390066305147556238091e+36, $dec!(1200439006630514755623809111470112768))]
        #[case(1.2092452008780889374306242e+36, $dec!(1209245200878088937430624206262894592))]
        #[case(1.2128702554462640138532086e+36, $dec!(1212870255446264013853208635745763328))]
        #[case(1.2149675743436131167249647e+36, $dec!(1214967574343613116724964724433747968))]
        #[case(1.2241327936047208923051096e+36, $dec!(1224132793604720892305109628118630400))]
        #[case(1.22793304699085360348e+36, $dec!(1227933046990853603475034061808861184))]
        #[case(1.22899541742200737398e+36, $dec!(1228995417422007373977825892638916608))]
        #[case(9.9922946222514011482612295e+36, $dec!(9992294622251401148261229546543513600))]
        #[case(1e37, $dec!(9999999999999999538762658202121142272))]
        #[case(1.3915525545907575110371474e+37, $dec!(13915525545907575110371474231682662400))]
        #[case(1.40939143091202859815e+37, $dec!(14093914309120285981497752782412709888))]
        #[case(1.41152957717943355268e+37, $dec!(14115295771794335526812797675377786880))]
        #[case(8.99751927497464463752e+37, $dec!(89975192749746446375245668401295654912))]
        #[case(9e37, $dec!(89999999999999992307089061666856370176))]
        #[case(92000000000000000000000000000000000000.0, $dec!(92000000000000000951219586616124243968))]
        #[case(9.8963770957104183918041383e+37, $dec!(98963770957104183918041383179923750912))]
        #[case(9.90674724565098317996e+37, $dec!(99067472456509831799574437996796051456))]
        #[case(9.9416392025568329869167061e+37, $dec!(99416392025568329869167061496691163136))]
        #[case(1e38, $dec!(99999999999999997748809823456034029568))]
        #[case(1.00002937752249454143e+38, $dec!(100002937752249454142867733120609681408))]
        #[case(1.00118425792532646754e+38, $dec!(100118425792532646754261688769432256512))]
        #[case(1.00168482779434459077e+38, $dec!(100168482779434459076867990585606144000))]
        #[case(1.0071511038254808437860504e+38, $dec!(100715110382548084378605044109527744512))]
        #[case(1.0135219760805361657667885e+38, $dec!(101352197608053616576678853301340471296))]
        #[case(1.0150248637523932737707174e+38, $dec!(101502486375239327377071737620993671168))]
        #[case(f64::INFINITY,                       $dec!(1.797693134862316e+308))]
        // --------------------------------------
        fn test_to_f64(#[case] expected: f64, #[case] d: $D) {
            let f = f64::try_from(d).unwrap();
            assert_eq!(f, expected);
            assert_eq!(f.integer_decode(), expected.integer_decode());
        }
    };
    (UNSIGNED:: 128, $dec: ident, $D: ident, THIS) => {
        super::test_impl!(UNSIGNED:: 128, $dec, $D);
    };
    (UNSIGNED:: 128, $dec: ident, $D: ident) => {};
    (SIGNED:: 128, $dec: ident, $D: ident, THIS) => {
        super::test_impl!(SIGNED:: 128, $dec, $D);

        #[rstest(::trace)]
        #[case(-1.7976931348623157e308, $dec!(-1.7976931348623157e+308))]
        #[case(-2.3509889819e-38, $dec!(-2.35098898189999980975445878426797734445e-38))]
        fn test_to_f64_signed_128(#[case] expected: f64, #[case] d: $D) {
            let f = f64::try_from(d).unwrap();
            assert_eq!(f, expected);
            assert_eq!(f.integer_decode(), expected.integer_decode());
        }
    };
    (SIGNED:: 128, $dec: ident, $D: ident) => {
        $crate::decimal::common::to::float::to_float!(TO S f64, $dec, $D);
        $crate::decimal::common::to::float::to_float!(TO NEG INF f64, $dec, $D);
    };
}

pub(crate) use test_impl;
