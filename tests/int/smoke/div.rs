use fastnum::*;
use rstest::rstest;

#[rstest(::trace)]
#[case(u64!(10000000000000000000), u64!(18446744073709551615), u64!(0), u64!(10000000000000000000))]
fn test_div_64(#[case] a: U64, #[case] b: U64, #[case] quotient: U64, #[case] reminder: U64) {
    assert_eq!(a.div_rem(b), (quotient, reminder));
    assert_eq!(a / b, quotient);
    assert_eq!(a % b, reminder);
    assert_eq!(quotient * b + reminder, a);

    let a_128 = a.to_u128().unwrap();
    let b_128 = b.to_u128().unwrap();
    let q_128 = quotient.to_u128().unwrap();
    let r_128 = reminder.to_u128().unwrap();

    assert_eq!(a_128 / b_128, q_128);
    assert_eq!(a_128 % b_128, r_128);
    assert_eq!(q_128 * b_128 + r_128, a_128);
}

#[rstest(::trace)]
#[case(u128!(68056473384187692692674921486353642291), u128!(11), u128!(6186952125835244790243174680577603844), u128!(7))]
#[case(u128!(73154974140586010739248045967419574737), u128!(3), u128!(24384991380195336913082681989139858245), u128!(2))]
#[case(u128!(223821778649442080754759139279048600938), u128!(7), u128!(31974539807063154393537019897006942991), u128!(1))]
#[case(u128!(39149983502711087896161746667051295237), u128!(9), u128!(4349998166967898655129082963005699470), u128!(7))]
#[case(u128!(68479538385902776313585725806768976282), u128!(11), u128!(6225412580536616028507793255160816025), u128!(7))]
#[case(u128!(119781587576444148601053792047214244647), u128!(13), u128!(9213968275111088353927214772862634203), u128!(8))]
#[case(u128!(209517018667388790154998730630767837191), u128!(15), u128!(13967801244492586010333248708717855812), u128!(11))]
#[case(u128!(36647853814139675629558747730617965325), u128!(17), u128!(2155756106714098566444632219448115607), u128!(6))]
#[case(u128!(64102916208190553826217547285049402590), u128!(19), u128!(3373837695167923885590397225528915925), u128!(15))]
#[case(u128!(112126180355174615747095657700187699325), u128!(21), u128!(5339341921674981702242650366675604729), u128!(16))]
#[case(u128!(271828182845904523536028747135266249776), u128!(165145986286327928205253101623384281993), u128!(1), u128!(106682196559576595330775645511881967783))]
#[case(u128!(135429639235484290726168463134488653377), u128!(128504887173913576742972195961712106444), u128!(1), u128!(6924752061570713983196267172776546933))]
#[case(u128!(271828182845904523536028747135266249776), u128!(113359996107054263052534883462989338760), u128!(2), u128!(45108190631795997430958980209287572256))]
#[case(u128!(141596251843071626975749750483375162940), u128!(103086166221133291914540493448469960258), u128!(1), u128!(38510085621938335061209257034905202682))]
#[case(u128!(271828182845904523536028747135266249776), u128!(101531357826601182471069181525256218622), u128!(2), u128!(68765467192702158593890384084753812532))]
#[case(u128!(265026525237552585138562589427322331200), u128!(101691747034673497300353200101832302912), u128!(2), u128!(61643031168205590537856189223657725376))]
#[case(u128!(271828182845904523536028747135266249776), u128!(100842325952287265407577047399205351701), u128!(2), u128!(70143530941329992720874652336855546374))]
#[case(u128!(255107542028323813665185254047231179273), u128!(101686999440848277484850449164236186579), u128!(2), u128!(51733543146627258695484355718758806115))]
#[case(u128!(271828182845904523536028747135266249776), u128!(100839971955989891322798836411044231075), u128!(2), u128!(70148238933924740890431074313177787626))]
#[case(u128!(176313359054420299598653087584124676089), u128!(101686999385435291811890586866707668369), u128!(1), u128!(74626359668985007786762500717417007720))]
#[case(u128!(271828182845904523536028747135266249776), u128!(100839971928514186696119060718072421445), u128!(2), u128!(70148238988876150143790625699121406886))]
#[case(u128!(184643289072368482408343506114212488574), u128!(101686999385435291804341443419382144048), u128!(1), u128!(82956289686933190604002062694830344526))]
#[case(u128!(271828182845904523536028747135266249776), u128!(100839971928514186692375930239675849274), u128!(2), u128!(70148238988876150151276886655914551228))]
#[case(u128!(158790199892623625802974176825922159037), u128!(101686999385435291804341443419382144047), u128!(1), u128!(57103200507188333998632733406540014990))]
fn test_div(#[case] a: U128, #[case] b: U128, #[case] quotient: U128, #[case] reminder: U128) {
    assert_eq!(a.div_rem(b), (quotient, reminder));
    assert_eq!(a / b, quotient);
    assert_eq!(a % b, reminder);
    assert_eq!(quotient * b + reminder, a);

    let a_128 = a.to_u128().unwrap();
    let b_128 = b.to_u128().unwrap();
    let q_128 = quotient.to_u128().unwrap();
    let r_128 = reminder.to_u128().unwrap();

    assert_eq!(a_128 / b_128, q_128);
    assert_eq!(a_128 % b_128, r_128);
    assert_eq!(q_128 * b_128 + r_128, a_128);
}
